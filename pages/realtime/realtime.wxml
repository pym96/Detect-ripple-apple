<view class="container">
  <!-- ç›¸æœºç»„ä»¶ -->
  <camera device-position="{{cameraPosition}}" flash="off" binderror="error" class="camera"></camera>
  
  <!-- å®æ—¶æ£€æµ‹æ¡†å åŠ å±‚ -->
  <view class="detection-overlay" wx:if="{{boxesInfo.length > 0}}">
    <block wx:for="{{boxesInfo}}" wx:key="id">
      <view class="bounding-box" style="{{item.style}} border-color:{{item.color}}">
        <view class="box-label" style="background-color:{{item.color}}">
          {{item.label}} {{item.confidencePercent}}%
        </view>
      </view>
    </block>
  </view>
  
  <!-- æ— æ£€æµ‹ç»“æœæç¤º -->
  <view class="no-detection-message" wx:if="{{showNoDetectionMessage && isDetecting}}">
    <view class="message-content">
      <text class="message-icon">âš ï¸</text>
      <text class="message-text">æœªæ£€æµ‹åˆ°è‹¹æœ</text>
    </view>
  </view>
  
  <!-- ä¿¡æ¯å’Œæ§åˆ¶å åŠ å±‚ -->
  <view class="info-overlay" wx:if="{{overlayVisible}}">
    <view class="status-info">
      <text class="info-text">FPS: {{fps}}</text>
      <text class="info-text">å¤„ç†æ—¶é—´: {{processingTimeAvgText}}ms</text>
      <text class="info-text">æ¨¡å¼: {{detectionMode === 'continuous' ? 'è¿ç»­' : 'å•æ¬¡'}}</text>
    </view>
  </view>
  
  <!-- æ§åˆ¶æŒ‰é’® -->
  <view class="controls">
    <view class="control-row">
      <view class="control-button" bindtap="goBack">
        <text class="icon">â†</text>
      </view>
      
      <view class="control-button {{isDetecting ? 'active' : ''}}" bindtap="toggleDetection">
        <text class="icon">{{isDetecting ? 'â¹' : 'â–¶ï¸'}}</text>
      </view>
      
      <view class="control-button" bindtap="switchCamera">
        <text class="icon">ğŸ”„</text>
      </view>
    </view>
    
    <view class="control-row">
      <view class="control-button" bindtap="toggleOverlay">
        <text class="icon">â„¹ï¸</text>
      </view>
      
      <view class="control-button" bindtap="switchDetectionMode">
        <text class="icon">{{detectionMode === 'continuous' ? 'ğŸ”„' : 'âš¡'}}</text>
      </view>
    </view>
  </view>
  
  <!-- ç›¸æœºæŒ‡å¯¼æç¤º -->
  <view class="camera-guide" wx:if="{{!isDetecting}}">
    <text>ç‚¹å‡»å¼€å§‹æŒ‰é’®è¿›è¡Œå®æ—¶æ£€æµ‹</text>
  </view>
  
  <!-- éšè—çš„Canvasç”¨äºå›¾åƒé¢„å¤„ç† -->
  <canvas canvas-id="preProcessCanvas" style="width:640px; height:640px; position:fixed; left:-1000px; top:-1000px"></canvas>
</view> 